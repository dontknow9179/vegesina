<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>VegeSina</title>
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="bookmark" href="/favicon.ico">

    <!-- CSS -->
    <!-- <link rel="stylesheet/less" type="text/css" href="styles.less" /> -->
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
        integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">

    <!-- JAVASCRIPT -->
    <script src="https://code.jquery.com/jquery-3.4.1.js"
        integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
    <!-- <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script> -->

    <script src="https://cdn.bootcss.com/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous">
    </script>
    <script src="https://cdn.bootcss.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous">
    </script>

    <script type="text/javascript">
        function timelineSearch() {
            var form = document.getElementById("searchbar");
            form.action = "{% url 'timeline' %}"
            form.submit();
        }
    </script>

    <style type="text/css">
        a:link {
            color:rgb(8, 53, 199);
            text-decoration:none;
        }
        a:visited {
            color: rgb(110, 67, 150);
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        .content {
            overflow : hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 2;
        }
    </style>    
</head>

<body>
    <nav class="navbar navbar-light fixed-top bg-white" style="margin: 0px; padding: 20px">
        <form id="searchbar" class="offset-md-2 form-inline" action="{% url 'search' %}" method="POST">
            {% csrf_token %}
            <div class="input-group" style="margin-left: 8px">
                <input type="text" class="form-control" {% if searchbar %} value="{{ searchbar }}" {% else %}
                    placeholder="输入想查找的内容" {% endif %}
                    style="width: 10cm" name="searchinput" required>
                <div class="input-group-append">
                    <button class="btn btn-outline-success" type="submit"><i class="fa fa-search"
                            aria-hidden="true"></i></button>
                </div>
            </div>
            <button onclick="timelineSearch()" class="btn btn-outline-info" style="margin-left: 15px" title="时间线搜索"><i
                class="far fa-clock"></i></button>
        </form>
    </nav>
    {% if display == 'search' %}
    <div class="row" style="margin-top: 80px; margin-left: 20px">
        <div class="offset-md-2 col-md-7 list-group">
            {% if hits %}
            {% for item in hits %}
            <div style="border: 0px" class="list-group-item align-items-start">
                <a href="{{ item.url }}" class="row" style="padding:0px; margin-bottom: 1px; font-size: 16px">{{ item.title }}</a>
                <a href="{{ item.url }}" class="row" style="padding:0px; margin-bottom: 1px; font-size: 13px; color:rgb(18, 153, 18); text-decoration: none">{{ item.url }}</a>
                <p class="row content" style="padding:0px; margin-bottom: 1px; font-size: 14px">{{ item.content }}</p>
            </div>
            {% endfor %}
            {% endif %}
        </div>
    </div>
    {% elif display == 'timeline' %}
    <div class="row" style="margin-top: 80px; margin-left: 20px">
        <div class="offset-md-2 col-md-7 list-group">
            {% if hits %}
            {% for item in hits %}
            <div style="border-right: 0px; border-top: 0px; border-bottom: 0px; border-left-width: 3px; border-left-color: rgb(62, 100, 112); padding: 10px" class="list-group-item align-items-start">
                <p style="margin-bottom:7px; padding: 0px; font-size: 18px; font-weight: 600">{{ item.time }}</p>
                <p style="white-space: pre-wrap; font-size: 15px">{{ item.title }}</p>
            </div>
            {% endfor %}
            {% endif %}
        </div>
    </div>
    {% endif %}
</body>